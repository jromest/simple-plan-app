{"version":3,"sources":["index.js"],"names":["renderCurrentView","currentView","id","container","getScrollPercent","documentEl","document","documentElement","documentBody","body","scrollTop","scrollHeight","clientHeight","fetchContent","url","callback","then","response","json","catch","err","renderPageContent","type","innerHTML","getRandomContent","data","renderContent","getElementById","htmlToRender","renderUsers","results","renderPosts","renderErrorPage","users","item","avatar","picture","name","phone","email","address","location","push","large","first","last","street","city","state","postcode","join","extractEmail","match","posts","title","postContent","author","addEventListener","$navbarBurgers","Array","prototype","slice","call","querySelectorAll","length","forEach","target","el","dataset","$target","classList","toggle","postButton","userButton","getAttribute"],"mappings":"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","file":"src.83c70c0f.map","sourceRoot":"../src","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\n  const $navbarBurgers = Array.prototype.slice.call(\n    document.querySelectorAll(\".navbar-burger\"),\n    0\n  );\n\n  if ($navbarBurgers.length > 0) {\n    $navbarBurgers.forEach(el => {\n      el.addEventListener(\"click\", () => {\n        const target = el.dataset.target;\n        const $target = document.getElementById(target);\n\n        el.classList.toggle(\"is-active\");\n        $target.classList.toggle(\"is-active\");\n      });\n    });\n  }\n\n  let currentView = \"post\";\n\n  let postButton = document.getElementById(\"post\");\n  let userButton = document.getElementById(\"user\");\n  let container = document.getElementById(\"main-content\");\n\n  renderPageContent(currentView, container);\n\n  postButton.addEventListener(\"click\", () => {\n    let id = postButton.getAttribute(\"id\");\n    currentView = renderCurrentView(currentView, id, container);\n  });\n\n  userButton.addEventListener(\"click\", () => {\n    let id = userButton.getAttribute(\"id\");\n    currentView = renderCurrentView(currentView, id, container);\n  });\n\n  window.addEventListener(\"scroll\", e => {\n    if (getScrollPercent() >= 80) {\n      getRandomContent(currentView);\n    }\n  });\n});\n\nfunction renderCurrentView(currentView, id, container) {\n  if (currentView !== id) {\n    renderPageContent(id, container);\n    return id;\n  }\n}\n\nfunction getScrollPercent() {\n  let documentEl = document.documentElement;\n  let documentBody = document.body;\n  return (\n    ((documentEl.scrollTop || documentBody.scrollTop) /\n      ((documentEl.scrollHeight || documentBody.scrollHeight) -\n        documentEl.clientHeight)) *\n    100\n  );\n}\n\nfunction fetchContent(url, callback) {\n  fetch(url)\n    .then(response => response.json())\n    .then(json => callback(json))\n    .catch(err => {\n      callback(null);\n      throw err;\n    });\n}\n\nfunction renderPageContent(type, container) {\n  container.innerHTML = \"\";\n  container.innerHTML += `<h1 class=\"is-size-2 is-capitalized\">${type}</h1>`;\n\n  getRandomContent(type);\n}\n\nfunction getRandomContent(type) {\n  let urlUser = \"https://randomuser.me/api/?results=5&nat=us,dk,fr,gb\";\n  let urlPost = \"https://jsonplaceholder.typicode.com/comments?postId=1\";\n\n  let url = type === \"user\" ? urlUser : urlPost;\n\n  fetchContent(url, data => {\n    renderContent(type, data);\n  });\n}\n\nfunction renderContent(type, data) {\n  let container = document.getElementById(\"main-content\");\n  let htmlToRender = \"\";\n\n  if (data !== null) {\n    if (type === \"user\") {\n      htmlToRender = renderUsers(data.results);\n    } else if (type === \"post\") {\n      htmlToRender = renderPosts(data);\n    }\n  } else {\n    htmlToRender = renderErrorPage();\n  }\n\n  container.innerHTML += htmlToRender;\n}\n\nfunction renderUsers(data) {\n  let users = [];\n\n  for (let item in data) {\n    let avatar = data[item].picture;\n    let name = data[item].name;\n    let phone = data[item].phone;\n    let email = data[item].email;\n    let address = data[item].location;\n\n    users.push(`\n    <div class=\"card\">\n      <div class=\"card-content\">\n        <div class=\"media is-block-mobile\">\n          <div class=\"media-left is-flex-mobile\">\n            <figure class=\"image is-128x128\">\n              <img src=\"${avatar.large}\" alt=\"\" class=\"avatar\">\n            </figure>\n          </div>\n          <div class=\"media-content\">\n            <p class=\"title is-4 is-capitalized has-text-centered-mobile\">\n              ${name.first + \" \" + name.last}\n            </p>\n            <p class=\"subtitle is-6 has-text-centered-mobile\">\n              <i class=\"icon ion-md-mail\"></i>\n              ${email}\n            </p>\n            <p>\n              <i class=\"icon ion-md-call\"></i>\n              ${phone}\n            </p>\n            <p class=\"is-capitalized\">\n              <i class=\"icon ion-md-pin\"></i>\n              ${address.street +\n                \", \" +\n                address.city +\n                \", \" +\n                address.state +\n                \" \" +\n                address.postcode}\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n    `);\n  }\n\n  return users.join(\"\");\n}\n\nfunction extractEmail(email) {\n  let name = email.match(/(.+)(@)/);\n  return name[1];\n}\n\nfunction renderPosts(data) {\n  let posts = [];\n\n  for (let item in data) {\n    let id = data[item].id;\n    let title = data[item].name;\n    let postContent = data[item].body;\n    let author = data[item].email;\n\n    posts.push(`\n      <div class=\"card\">\n        <div class=\"card-image\">\n          <figure class=\"image\">\n            <img src=\"https://picsum.photos/980/400/?image${id}\" alt=\"\">\n          </figure>\n        </div>\n        <div class=\"card-content\">\n          <p class=\"title is-4 is-capitalized\">${title}</p>\n          <p>${postContent}</p>\n        </div>\n        <div class=\"card-footer\">\n          <div class=\"card-footer-item author\">\n            <i class=\"icon ion-md-person\"></i>\n            ${extractEmail(author)}\n          </div>\n          <div class=\"card-footer-item is-size-4-tablet\">\n            <i class=\"card-footer-item icon ion-logo-facebook\"></i>\n            <i class=\"card-footer-item icon ion-logo-twitter\"></i>\n            <i class=\"card-footer-item icon ion-logo-instagram\"></i>\n            <i class=\"card-footer-item icon ion-logo-rss\"></i>\n          </div>\n        </div>\n      </div>\n    `);\n  }\n\n  return posts.join(\"\");\n}\n\nfunction renderErrorPage() {\n  return `\n    <div class=\"notification is-warning\">\n      Failed to load.\n    </div>\n  `;\n}\n"]}