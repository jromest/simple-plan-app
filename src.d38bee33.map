{"version":3,"sources":["index.js"],"names":["document","addEventListener","$navbarBurgers","Array","prototype","slice","call","querySelectorAll","length","forEach","el","target","dataset","$target","getElementById","classList","toggle","currentView","postButton","userButton","container","renderPageContent","id","getAttribute","renderCurrentView","window","getScrollPercent","getRandomContent","documentEl","documentElement","documentBody","body","scrollTop","scrollHeight","clientHeight","fetchContent","url","callback","fetch","then","response","json","catch","err","type","innerHTML","urlUser","urlPost","renderContent","data","htmlToRender","renderUsers","results","renderPosts","renderErrorPage","users","item","avatar","picture","name","phone","email","address","location","push","large","first","last","street","city","state","postcode","join","extractEmail","match","posts","title","postContent","author"],"mappings":"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","file":"src.d38bee33.map","sourceRoot":"../src","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\n  const $navbarBurgers = Array.prototype.slice.call(\n    document.querySelectorAll(\".navbar-burger\"),\n    0\n  );\n\n  if ($navbarBurgers.length > 0) {\n    $navbarBurgers.forEach(el => {\n      el.addEventListener(\"click\", () => {\n        const target = el.dataset.target;\n        const $target = document.getElementById(target);\n\n        el.classList.toggle(\"is-active\");\n        $target.classList.toggle(\"is-active\");\n      });\n    });\n  }\n\n  let currentView = \"post\";\n\n  let postButton = document.getElementById(\"post\");\n  let userButton = document.getElementById(\"user\");\n  let container = document.getElementById(\"main-content\");\n\n  renderPageContent(currentView, container);\n\n  postButton.addEventListener(\"click\", () => {\n    let id = postButton.getAttribute(\"id\");\n    currentView = renderCurrentView(currentView, id, container);\n  });\n\n  userButton.addEventListener(\"click\", () => {\n    let id = userButton.getAttribute(\"id\");\n    currentView = renderCurrentView(currentView, id, container);\n  });\n\n  window.addEventListener(\"scroll\", e => {\n    if (getScrollPercent() >= 80) {\n      getRandomContent(currentView);\n    }\n  });\n});\n\nfunction renderCurrentView(currentView, id, container) {\n  if (currentView !== id) {\n    renderPageContent(id, container);\n    return id;\n  }\n}\n\nfunction getScrollPercent() {\n  let documentEl = document.documentElement;\n  let documentBody = document.body;\n  return (\n    ((documentEl.scrollTop || documentBody.scrollTop) /\n      ((documentEl.scrollHeight || documentBody.scrollHeight) -\n        documentEl.clientHeight)) *\n    100\n  );\n}\n\nfunction fetchContent(url, callback) {\n  fetch(url)\n    .then(response => response.json())\n    .then(json => callback(json))\n    .catch(err => {\n      callback(null);\n      throw err;\n    });\n}\n\nfunction renderPageContent(type, container) {\n  container.innerHTML = \"\";\n  container.innerHTML += `<h1 class=\"is-size-2 is-capitalized\">${type}</h1>`;\n\n  getRandomContent(type);\n}\n\nfunction getRandomContent(type) {\n  let urlUser = \"https://randomuser.me/api/?results=5&nat=us,dk,fr,gb\";\n  let urlPost = \"https://jsonplaceholder.typicode.com/comments?postId=1\";\n\n  let url = type === \"user\" ? urlUser : urlPost;\n\n  fetchContent(url, data => {\n    renderContent(type, data);\n  });\n}\n\nfunction renderContent(type, data) {\n  let container = document.getElementById(\"main-content\");\n  let htmlToRender = \"\";\n\n  if (data !== null) {\n    if (type === \"user\") {\n      htmlToRender = renderUsers(data.results);\n    } else if (type === \"post\") {\n      htmlToRender = renderPosts(data);\n    }\n  } else {\n    htmlToRender = renderErrorPage();\n  }\n\n  container.innerHTML += htmlToRender;\n}\n\nfunction renderUsers(data) {\n  let users = [];\n\n  for (let item in data) {\n    let avatar = data[item].picture;\n    let name = data[item].name;\n    let phone = data[item].phone;\n    let email = data[item].email;\n    let address = data[item].location;\n\n    users.push(`\n    <div class=\"card\">\n      <div class=\"card-content\">\n        <div class=\"media is-block-mobile\">\n          <div class=\"media-left is-flex-mobile\">\n            <figure class=\"image is-128x128\">\n              <img src=\"${avatar.large}\" alt=\"\" class=\"avatar\">\n            </figure>\n          </div>\n          <div class=\"media-content\">\n            <p class=\"title is-4 is-capitalized has-text-centered-mobile\">\n              ${name.first + \" \" + name.last}\n            </p>\n            <p class=\"subtitle is-6 has-text-centered-mobile\">\n              <i class=\"icon ion-md-mail\"></i>\n              ${email}\n            </p>\n            <p>\n              <i class=\"icon ion-md-call\"></i>\n              ${phone}\n            </p>\n            <p class=\"is-capitalized\">\n              <i class=\"icon ion-md-pin\"></i>\n              ${address.street +\n                \", \" +\n                address.city +\n                \", \" +\n                address.state +\n                \" \" +\n                address.postcode}\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n    `);\n  }\n\n  return users.join(\"\");\n}\n\nfunction extractEmail(email) {\n  let name = email.match(/(.+)(@)/);\n  return name[1];\n}\n\nfunction renderPosts(data) {\n  let posts = [];\n\n  for (let item in data) {\n    let id = data[item].id;\n    let title = data[item].name;\n    let postContent = data[item].body;\n    let author = data[item].email;\n\n    posts.push(`\n      <div class=\"card\">\n        <div class=\"card-image\">\n          <figure class=\"image\">\n            <img src=\"https://picsum.photos/980/400/?image${id}\" alt=\"\">\n          </figure>\n        </div>\n        <div class=\"card-content\">\n          <p class=\"title is-4 is-capitalized\">${title}</p>\n          <p>${postContent}</p>\n        </div>\n        <div class=\"card-footer\">\n          <div class=\"card-footer-item author\">\n            <i class=\"icon ion-md-person\"></i>\n            ${extractEmail(author)}\n          </div>\n          <div class=\"card-footer-item is-size-4-tablet\">\n            <i class=\"card-footer-item icon ion-logo-facebook\"></i>\n            <i class=\"card-footer-item icon ion-logo-twitter\"></i>\n            <i class=\"card-footer-item icon ion-logo-instagram\"></i>\n            <i class=\"card-footer-item icon ion-logo-rss\"></i>\n          </div>\n        </div>\n      </div>\n    `);\n  }\n\n  return posts.join(\"\");\n}\n\nfunction renderErrorPage() {\n  return `\n    <div class=\"notification is-warning\">\n      Failed to load.\n    </div>\n  `;\n}\n"]}